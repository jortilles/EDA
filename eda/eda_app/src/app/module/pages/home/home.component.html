<div class="grid animated fadeIn">

    <div *ngIf="!isObserver" class="col-12"  id="div_new_dashboard">
        <eda-dashboard-panel class="pointer" >

            <div id="home_new_dashboard" class="d-flex justify-content-center" (click)="createDashboard = true;">
                <h3 i18n="@@tituloNuevoInforme">
                    Crear nuevo informe
                </h3>
            </div>

        </eda-dashboard-panel>
    </div>  




    <div class="col-12 " *ngIf="tags.length !== 2" style="margin-top: 2em;">
        <p-toolbar class="tag-container" >
            <span class="tag-label"> Tags: </span>
            <span
                [className]="selectedTag === tag.value || (tag.value === null && selectedTag === 0 )? 'tag active' : 'tag' "
                *ngFor="let tag of tags" (click)="filterDashboards(tag)">{{tag.label}}</span>

        </p-toolbar>
    </div>


    <!-- Buscador -->
    <div class="col-12 ml-3"  *ngIf="filteringByName==true ||  (visibleDashboards.publics.length >3 || visibleDashboards.grups.length >3 || visibleDashboards.grups.length >3 || visibleDashboards.privats.length >3 )" style="margin-top: 0em;">
        <p-toolbar class="tag-container" >
            <p-toolbar class="tag-container" >
                <i class="fa fa-search" style="font-size: 16px"></i>
                <input type="text" id="buscador"  name="buscador" (keyup)="filterTitle($event)"   i18n-placeholder="@@buscarPorNombre" placeholder="Buscar por nombre del informe"> 
            </p-toolbar>
        </p-toolbar>
    </div>


    <!-- PUBLICS -->
    <div class="col-12 lg:col-3" id="public-list">
        <h4 i18n="@@tituloGrupoPublicos" class="visibility-segment">
            PUBLICOS
        </h4>

        <div *ngFor="let dashboard of visibleDashboards.shared" class="col-12 md:col-12 mb-2" style="padding: 0px;">

            <eda-dashboard-panel>
                <div class="d-flex justify-content-between align-items-end">

                    <h3 (click)="goToDashboard(dashboard)" class="pointer">
                        {{dashboard.config.title}}
                    </h3>

                    
                    <span *ngIf=" !isObserver   &&  canIEdit(dashboard)   " (click)="deleteDashboard(dashboard)" class="pointer">
                        <i class="fa fa-trash" style="font-size: 16px"></i>
                    </span>

                </div>
            </eda-dashboard-panel>

        </div>
    </div>
    <!-- COMUN -->
    <div class="col-12 lg:col-3"   id="common-list">
        <h4 i18n="@@tituloGrupoComunes" class="visibility-segment">
            COMUNES
        </h4>

        <div *ngFor="let dashboard of visibleDashboards.publics" class="col-12 md:col-12 mb-2" style="padding: 0px;">

            <eda-dashboard-panel>
                <div class="d-flex justify-content-between align-items-end">

                    <h3 (click)="goToDashboard(dashboard)" class="pointer">
                        {{dashboard.config.title}}
                    </h3>

                    <span *ngIf=" !isObserver   &&  canIEdit(dashboard)  " (click)="deleteDashboard(dashboard)" class="pointer">
                        <i class="fa fa-trash" style="font-size: 16px"></i>
                    </span>

                </div>
            </eda-dashboard-panel>

        </div>
    </div>
    <!-- GROUPS -->
    <div class="col-12 lg:col-3"  id="group-list">
        <h4 i18n="@@tituloGrupoMisGrupos" class="visibility-segment">
            MIS GRUPOS
        </h4>

        <div *ngFor="let group of groups" class="col-12" style="padding: 0px;">
            <!-- <h6>{{group.name}}:</h6> -->

            <div *ngFor="let dashboard of visibleDashboards.grups | ids:'group':group" class="col-12 md:col-12 mb-2"
                style="padding: 0px;">
                <ng-container>
                    <eda-dashboard-panel>
                        <h3 (click)="goToDashboard(dashboard)" class="pointer">
                            {{dashboard.config.title}}
                        </h3>

                        <div class="d-flex justify-content-between align-items-end">
                            <span style="text-align: left;">{{getGroupsNamesByDashboard(dashboard.group)}}</span>

                            <span *ngIf=" !isObserver   &&  canIEdit(dashboard)  " (click)="deleteDashboard(dashboard)" class="pointer">
                                <i class="fa fa-trash" style="font-size: 16px"></i>
                            </span>
                        </div>
                    </eda-dashboard-panel>
                </ng-container>

            </div>
        </div>
    </div>
    <!-- PRIVATES -->
    <div class="col-12 lg:col-3" id="private-list">
        <h4 i18n="@@tituloGrupoPersonales" class="visibility-segment">
            PRIVADOS
        </h4>

        <div *ngFor="let dashboard of visibleDashboards.privats" class="col-12 md:col-12 mb-2" style="padding: 0px;">

            <ng-container *ngIf="!isAdmin">
                <eda-dashboard-panel>
                    <div class="d-flex justify-content-between align-items-end">

                        <h3 (click)="goToDashboard(dashboard)" class="pointer">
                            {{dashboard.config.title}}
                        </h3>

                        <span *ngIf=" !isObserver   &&  canIEdit(dashboard)  " (click)="deleteDashboard(dashboard)" class="pointer">
                            <i class="fa fa-trash" style="font-size: 16px"></i>
                        </span>

                    </div>
                </eda-dashboard-panel>
            </ng-container>

            <ng-container *ngIf="isAdmin">
                <eda-dashboard-panel>
                    <h3 (click)="goToDashboard(dashboard)" class="pointer">
                        {{dashboard.config.title}}
                    </h3>

                    <div class="d-flex justify-content-between align-items-end">
                        <span>{{dashboard.user?.name}}</span>

                        <span *ngIf=" !isObserver   &&  canIEdit(dashboard)  " (click)="deleteDashboard(dashboard)" class="pointer">
                            <i class="fa fa-trash" style="font-size: 16px"></i>
                        </span>
                    </div>

                </eda-dashboard-panel>
            </ng-container>

        </div>
    </div>

</div>

<app-create-dashboard *ngIf="createDashboard" (close)="onCloseCreateDashboard($event)"></app-create-dashboard>

<div id="tutorial-home">
    <div>
        <h2 i18n="@@tutorialHome" class="title-tutorial ">Edalitics free</h2>
    </div>

    <div>
        <p class="tutorial-text"  >
            <span i18n="@@firstAboutParagraphHome_1">Toda la potencia de Edalitics para información pública o de uso personal. </span> 
            <a class="stronger-paragraph" href="https://www.edalitics.com">Edalitics</a> 
            <span i18n="@@firstAboutParagraphHome_2"> es el servicio cloud que ofrece </span>
            <a class="stronger-paragraph" href="https://www.jortilles.com">Jortilles</a> 
            <span i18n="@@firstAboutParagraphHome_3"> sobre </span>
            <a class="stronger-paragraph" href="https://eda.jortilles.com">EDA</a>
            <span i18n="@@firstAboutParagraphHome_4">. Edalitics Free te permite analizar toda la información que quieras de forma gratuita siempre que hagas un uso razonable.</span>
        </p>

        <p class="tutorial-text">
            <span i18n="@@secondAboutParagraphHome_1">A continuación tienes una guía rápida. Toda la información que necesites está disponible en la </span>
            <a i18n="@@secondAboutParagraphHome_2" class="stronger-paragraph" href="https://edadoc.jortilles.com/#/">documentación</a>
            <span i18n="@@secondAboutParagraphHome_3"> o puedes pedir ayuda en los </span>
            <a i18n="@@secondAboutParagraphHome_4" class="stronger-paragraph" href="https://github.com/jortilles/EDA/discussionso">grupos de discusión.</a>
        </p>
    </div>

    <h2 class="title-tutorial" i18n="@@tutorialTitleHome">Tutorial</h2>
    <div>
        <div class="tutorial-text">
            <span i18n="@@tutorialFirstParagraphHome">Para analizar la información con Edalitics necesitarás:</span>
            <ol>
                <li><b i18n="@@tutorialFirstOrdListHome_1">Crear una fuente de datos</b> <span  i18n="@@tutorialFirstOrdListHome_2">: Conectar tus datos a Edalitics.</span></li>
                <li><b  i18n="@@tutorialSecondOrdListHome_1">Crear un informe</b><span i18n="@@tutorialSecondOrdListHome_2">: Analizar  tus datos a Edalitics.</span></li>
            </ol> 
        </div>
        <div>
            <p-panel i18n-header="@@tutorialTitleFirstPPanel" header="1. Crear una fuente de datos:" [ngClass]="{'large-header': true}">
                <div class="tutorial-text">
                    <p>
                        <span i18n="@@tutorialFirstPPanelParagraph_1">Hay una explicación más detallada en la </span>
                        <a i18n="@@tutorialFirstPPanelParagraph_2" href="https://edadoc.jortilles.com/#/modelo_de_datos" target="_blank">documentación.</a>
                        <span i18n="@@tutorialFirstPPanelParagraph_3">O puedes ver este</span> 
                        <a i18n="@@tutorialFirstPPanelParagraph_4" href="https://youtu.be/Px709s0ftiI" target="_blank"> video-tutorial.</a>
                        <a href="https://youtu.be/Px709s0ftiI" target="_blank"><img src="assets/images/help/new_datamodel.png"   class="baseline"/></a> 
                    </p>
                    <p>
                        <span i18n="@@tutorialSecondPPanelParagraph_1">Edalitics permite analizar datos de una </span> 
                        <b i18n="@@tutorialSecondPPanelParagraph_2">base de datos</b>
                        <span i18n="@@tutorialSecondPPanelParagraph_3">, un </span> 
                        <b i18n="@@tutorialSecondPPanelParagraph_4">webservice</b>
                        <span i18n="@@tutorialSecondPPanelParagraph_5"> o un archivo </span>
                        <b>excel.</b>  
                    </p>
                    <ul>
                        <li> 
                            <a i18n="@@tutorialFirstUnordListHomeP1_1">En el menú de la izquierda elegimos </a>
                            <span i18n="@@tutorialFirstUnordListHomeP1_2">fuente de datos</span>
                            <a i18n="@@tutorialFirstUnordListHomeP1_3">, al desplegarse el menú:</a>  
                            <span i18n="@@tutorialFirstUnordListHomeP1_4"> nueva fuente de datos.</span>
                        </li>
                        <li> 
                            <span i18n="@@tutorialFirstUnordListHomeP2">Una vez en la configuración el damos un nombre y elegimos el tipo de orígen de datos. </span>
                        </li>
                        <li>
                            <span i18n="@@tutorialFirstUnordListHomeP3">Configuramos los datos necesarios. </span>
                        </li>
                        <li>
                            <span i18n="@@tutorialFirstUnordListHomeP4">Personalizamos, si queremos, nuestra fuente de datos.</span>
                        </li>
                    </ul>
                </div>
            </p-panel>
        </div>

        <br>


        <div>
            <p-panel i18n-header="@@tutorialTitleSecondPPanel" header="2. Creación de un nuevo informe y paneles de visualización de datos:" [ngClass]="{'large-header': true}">
                <div class="tutorial-text">
                    <p>
                        <span i18n="@@tutorialThirdPPanelParagraph_1">Hay una explicación más detallada en la </span>
                        <a i18n="@@tutorialThirdPPanelParagraph_2" href="https://edadoc.jortilles.com/#/crear_informes" target="_blank">documentación.</a>
                        <span i18n="@@tutorialThirdPPanelParagraph_3"> O puedes ver este </span> 
                        <a i18n="@@tutorialThirdPPanelParagraph_4" href="https://youtu.be/RFznLe9kxHU" target="_blank">video-tutorial.</a> 
                        <a href="https://youtu.be/RFznLe9kxHU" target="_blank"><img src="assets/images/help/new_report.png"  class="baseline" /></a> 
                    </p> 
                    <ul >
                        <li>
                            <span i18n="@@tutorialSecondUnordListHomeP1_1">En la parte superior de la pantalla tenemos el boton </span>
                            <b i18n="@@tutorialSecondUnordListHomeP1_2">crear nuevo informe</b>
                            <span i18n="@@tutorialSecondUnordListHomeP1_3">, el cual nos abre un pop up que contiene los campos de nuevo nombre de informe y selección de una fuente de datos.</span> 
                        </li>
                        <li>
                            <span i18n="@@tutorialSecondUnordListHomeP2">Le damos un nombre al informe y elegimos la fuente de datos sobre la que queremos hacer el informe.</span>
                        </li>
                        <li>
                            <span i18n="@@tutorialSecondUnordListHomeP3">Agregamos paneles de datos, filtros o textos a nuestro informe. </span>
                        </li>
                    </ul>
                </div>
            </p-panel>
        </div>


        <br>


        <div>
            <p-panel i18n-header="@@tutorialTitleThirdPPanel" header="KPIs y alertas con edalitics:" [ngClass]="{'large-header': true}">
                <div class="tutorial-text">
                    <p>
                        <span i18n="@@tutorialThirdPPanelParagraph_1">Hay una explicación más detallada en la </span>
                        <a i18n="@@tutorialThirdPPanelParagraph_2" href="https://edadoc.jortilles.com/#/envio_mail" target="_blank">documentación.</a>
                        <span i18n="@@tutorialThirdPPanelParagraph_3"> O puedes ver este </span> 
                        <a i18n="@@tutorialThirdPPanelParagraph_4" href="https://youtu.be/UfSJn8DxnVE" target="_blank">video-tutorial.</a> 
                        <a href="https://youtu.be/0Fx3_aiOUgI" target="_blank"><img src="assets/images/help/alertas.png"  class="baseline" /></a> 
                    </p> 
                    <ul >
                        <li>
                            <span i18n="@@tutorialThird_1">Una vez creado un KPI en un informe. </span>
                            
                        </li>
                        <li>
                            <span i18n="@@tutorialThird_2">Se puede definir una alerta que se enviará por email en caso de que la condición del KPI se cumpla.</span>
                        </li>
                        <li>
                            <span i18n="@@tutorialThird_3">Llegará un mail a la hora definida con el texto indicado.</span>
                        </li>
                    </ul>
                </div>
            </p-panel>
        </div>



        <br>


        <div>
            <p-panel i18n-header="@@tutorialTitleExcelPanel" header="Analiza datos de un excel con edalitics:" [ngClass]="{'large-header': true}">
                <div class="tutorial-text">
                    <p>
                        <span i18n="@@tutorialExcelParagraph1"> Puedes ver cómo funciona en este  </span> 
                        <a i18n="@@tutorialThirdPPanelParagraph_4" href="https://youtu.be/-tFoBCbyitw" target="_blank">video-tutorial.</a> 
                        <a href="https://youtu.be/-tFoBCbyitw" target="_blank"><img src="assets/images/help/excel.png"  class="baseline" /></a> 
                    </p> 
                    <ul >
                        <li>
                            <span i18n="@@tutorialExcel_1">Carga los datos del excel. </span>
                            
                        </li>
                        <li>
                            <span i18n="@@tutorialExcel_2">Analizalos como cualquiero otra fuente de datos.</span>
                        </li>

                    </ul>
                </div>
            </p-panel>
        </div>



        <br>


        <div>
            <p-panel i18n-header="@@tutorialTitleMapPanel" header="Mapas con edalitics:" [ngClass]="{'large-header': true}">
                <div class="tutorial-text">
                    <p>
                        <span i18n="@@tutorialThirdPPanelParagraph_1">Hay una explicación más detallada en la </span>
                        <a i18n="@@tutorialThirdPPanelParagraph_2" href="https://edadoc.jortilles.com/#/mapas" target="_blank">documentación.</a>
                        <span i18n="@@tutorialThirdPPanelParagraph_3"> O puedes ver este </span> 
                        <a i18n="@@tutorialThirdPPanelParagraph_4" href="https://youtu.be/VKRlWRKDXMY" target="_blank">video-tutorial.</a> 
                        <a href="https://youtu.be/VKRlWRKDXMYI" target="_blank"><img src="assets/images/help/mapas.png"  class="baseline" /></a> 
                    </p> 

                    <ul >
                        <li>
                            <span i18n="@@tutorialMap_1">Creas un modelo de datos con datos con una referencia geográfica. País, región, ciudad, etc </span>
                            
                        </li>
                        <li>
                            <span i18n="@@tutorialMap_2">Cagas un fichero GEOJSON con capas geográficas.</span>
                        </li>
                        <li>
                            <span i18n="@@tutorialMap_3">Vinculas el campo de la tabla con la información geográfica con el atributo de la capa que contiene el nombre. Ambos deben coincidir. Nombre de país con nombre de país por ejemplo.</span>
                        </li>
                        <li>
                            <span i18n="@@tutorialMap_4">Ahora, cuando hagas un panel en un informe con el atributo geográfico, el país por ejemplo. Podrás visualizarlo como un mapa.</span>
                        </li>
                    </ul>
                </div>
            </p-panel>
        </div>


        




    </div>
</div>