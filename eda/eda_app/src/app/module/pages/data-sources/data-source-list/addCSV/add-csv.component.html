<eda-dialog2 [display]="display" [header]="title" width="80vw" height="80vh"
  [disableApply]="!tableName || !delimiter || !csvHeaders" (apply)="generateTable()"
  (close)="closeDialog()">

  <div content class="flex gap-4 p-2">
    <!-- SecciÃ³n del formulario -->
    <div class="w-full md:w-1/5 mt-4 space-y-4">
      <div class="w-full">
        <label i18n="@@placeholderTableName" for="tablename" class="block text-sm font-medium text-gray-700 mb-1">Nombre de la tabla</label>
        <input
          id="tablename"
          type="text"
          [(ngModel)]="tableName"
          class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring focus:ring-blue-200"
        />
      </div>

      <div class="w-full">
        <label i18n="@@placeholderInputSeparator" for="separator" class="block text-sm font-medium text-gray-700 mb-1">Separador</label>
        <input
          id="separator"
          type="text"
          [(ngModel)]="delimiter"
          class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring focus:ring-blue-200"
        />
      </div>

      <div class="w-full">
        <h6 i18n="@@addFile"  class="text-sm font-semibold text-gray-800">Subir archivo</h6>
        <input type="file" #file class="hidden" (change)="onFilesAdded()" />
        <button
          type="button"
          (click)="loadFile()"
          class="mt-2 p-2 rounded-full border border-gray-400 hover:bg-gray-100 transition"
        >
          <i class="fa fa-upload"></i>
        </button>
      </div>
    </div>
    <!-- <div class="col-12 md:col-2 " style="margin-top: 1em;">
      <div style="margin-bottom: 10px" class="col-12">
        <span class="p-float-label">
          <input id="tablename" type="text" pInputText [(ngModel)]="tableName">
          <label i18n="@@placeholderTableName" for="tablename">Nombre de la tabla</label>
        </span>
      </div>
      <div style="margin-bottom: 10px" class="col-12">
        <span class="p-float-label">
          <input id="separator" type="text" pInputText [(ngModel)]="delimiter">
          <label i18n="@@placeholderInputSeparator" for="separator">Separador</label>
        </span>
      </div>

      <div style="margin-bottom: 10px" class="col-12 ">
        <h6 i18n="@@addFile">Subir archivo</h6>
        <input type="file" #file style="display: none" (change)="onFilesAdded()" />
        <button pButton pRipple type="button" icon="fa fa-upload" class="p-button-rounded p-button-outlined"
          (click)="loadFile()" style="margin:0.2em"></button>

      </div>

    </div> -->

    <div class="w-full md:w-4/5 mt-4 overflow-x-auto">
      <p-table [value]="csvColumns">
        <ng-template pTemplate="header">
          <tr>
            <th *ngFor="let header of editFieldsHeaders">{{header}}</th>
          </tr>
        </ng-template>
        <ng-template pTemplate="body" let-row>
          <tr>
            <td>
              {{row.field}}
            </td>
            <td>
              <p-dropdown [options]="dataTypes" [(ngModel)]="row['type']"
                dropdownIcon="pi pi-angle-down"
                placeholder="tipo"
                appendTo="body"
              ></p-dropdown>
            </td>
            <td>
              <p-dropdown *ngIf="row['type'] ==='timestamp'" [options]="dataFormats" [(ngModel)]="row['format']"
                dropdownIcon="pi pi-angle-down" placeholder="formato" autoWidth="false" [style]="{'width':'50%'}"
                appendTo="body"
              ></p-dropdown>
            </td>

            <td>
              <p-dropdown *ngIf="['integer', 'numeric'].includes(row['type'])" [options]="decSeparators"
                [(ngModel)]="row['separator']" dropdownIcon="pi pi-angle-down" placeholder="separador decimal"
                autoWidth="false" [style]="{'width':'50%'}"
                appendTo="body"
              ></p-dropdown>
            </td>
          </tr>
        </ng-template>
      </p-table>
    </div>
  </div>

</eda-dialog2>