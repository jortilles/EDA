<div class="min-h-screen bg-gray-50">
  <div class="w-full p-6 space-y-6">
    <!-- Header -->
    <div class="flex justify-between items-center">
      <h1 class="text-2xl font-semibold tracking-tight">{{title}}</h1>
      <button class="w-6 h-6 rounded-full flex items-center justify-center" (click)="showSidebar($event)">
        <i class="pi pi-ellipsis-v"></i>
      </button>
    </div>

    <!-- Filters Section -->
    <div class="flex justify-between align-middle rounded-lg p-3 space-y-4 shadow-sm bg-white">
      <app-v2-global-filter #globalFilter [dashboard]="this"></app-v2-global-filter>

      <p-message severity="warn" text="Hi han canvis sense guardar" styleClass="w-full"></p-message>
    </div>

    <div [style.height]="'1000px'">
      <gridster [options]="gridsterOptions" class="dashboard-grid">
        @for (panel of panels; track panel) {
          <gridster-item
            class="gridster-item" 
            [item]="panel" 
            [dragAndDrop]="panel.dragAndDrop" 
            [resizable]="panel.resizable">

            @if (panel.type===0) {
              <eda-blank-panel #edaPanel [panel]="panel" [inject]="injectEdaPanel" (remove)="onRemovePanel($event)" (action)="onPanelAction($event)" (duplicate)="onDuplicatePanel($event)" >
              </eda-blank-panel>
            }

            @if (panel.type===1) {
              <eda-title-panel #edaPanel [id]="panel.id" [panel]="panel" [inject]="injectEdaPanel" (remove)="onRemovePanel($event)" (duplicate)="onDuplicatePanel($event)" class="eda-text-panel">
              </eda-title-panel>
            }

          </gridster-item>
        }
      </gridster>
    </div>
  </div>

</div>

@if (dashboard) {
  <app-dashboard-sidebar [dashboard]="this"></app-dashboard-sidebar>
}